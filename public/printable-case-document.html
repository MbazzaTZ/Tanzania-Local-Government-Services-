<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Community Case Record</title>
  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";
    const supabase = createClient("https://YOUR_PROJECT.supabase.co","YOUR_ANON_PUBLIC_KEY");
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    async function loadData(){
      const { data } = await supabase.from("cases").select("*").eq("id", id).single();
      if(!data) return;
      document.getElementById("case_no").innerText = "CASE-" + data.id.slice(0,8).toUpperCase();
      document.getElementById("applicant").innerText = data.applicant_name;
      document.getElementById("respondent").innerText = data.respondent_name;
      document.getElementById("case_type").innerText = data.case_type;
      document.getElementById("summary").innerText = data.description || "No details provided.";
      document.getElementById("date").innerText = new Date(data.created_at).toLocaleDateString();
    }
    loadData();
  </script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="p-10 bg-white text-gray-900">
  <div class="text-center border-b pb-3 mb-4">
    <h1 class="text-2xl font-bold uppercase">COMMUNITY CASE DOCUMENT</h1>
  </div>
  <div class="space-y-2">
    <p><strong>Case No:</strong> <span id="case_no"></span></p>
    <p><strong>Applicant:</strong> <span id="applicant"></span></p>
    <p><strong>Respondent:</strong> <span id="respondent"></span></p>
    <p><strong>Case Type:</strong> <span id="case_type"></span></p>
    <p><strong>Date:</strong> <span id="date"></span></p>
  </div>
  <div class="mt-4">
    <h3 class="font-semibold mb-1">Case Summary:</h3>
    <p id="summary" class="border border-gray-300 rounded p-3"></p>
  </div>
  <div class="mt-8 text-center">
    <p class="font-semibold">Filed and Verified by Local Government Officer</p>
  </div>
</body>
</html>
