<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment Receipt</title>
  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";
    const supabase = createClient("https://YOUR_PROJECT.supabase.co","YOUR_ANON_PUBLIC_KEY");
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    async function loadData(){
      const { data } = await supabase.from("payments").select("*").eq("id", id).single();
      if(!data) return;
      document.getElementById("payer_name").innerText = data.full_name;
      document.getElementById("amount").innerText = data.amount + " TZS";
      document.getElementById("service").innerText = data.service_type;
      document.getElementById("control_no").innerText = data.control_number;
      document.getElementById("date").innerText = new Date(data.created_at).toLocaleDateString();
      document.getElementById("receipt_no").innerText = "RCPT-" + data.id.slice(0,8).toUpperCase();
    }
    loadData();
  </script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="p-10 bg-white text-gray-900">
  <div class="text-center border-b pb-3 mb-4">
    <h1 class="text-2xl font-bold">LOCAL GOVERNMENT PAYMENT RECEIPT</h1>
  </div>
  <div class="space-y-2">
    <p><strong>Receipt No:</strong> <span id="receipt_no"></span></p>
    <p><strong>Payer:</strong> <span id="payer_name"></span></p>
    <p><strong>Service:</strong> <span id="service"></span></p>
    <p><strong>Amount:</strong> <span id="amount"></span></p>
    <p><strong>Control Number:</strong> <span id="control_no"></span></p>
    <p><strong>Date:</strong> <span id="date"></span></p>
  </div>
  <div class="mt-6 text-center text-sm">
    <p>Thank you for your payment.</p>
    <p class="italic">This is an official government receipt generated by the Local Government Portal.</p>
  </div>
</body>
</html>
